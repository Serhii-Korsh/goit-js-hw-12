{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '46054358-74185f2755c78a9980c41a2df';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query) {\n    try {\n        const response = await fetch(\n            `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query.trim())}&image_type=photo&orientation=horizontal&safesearch=true`\n        );\n        if (!response.ok) {\n            throw new Error('No images found.');\n        }\n        return response.json();\n    } catch (error) {\n        console.error(error);\n        throw new Error('Error fetching images.');\n    }\n}\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGallery(images) {\n    const gallery = document.querySelector('.gallery');\n  \n\n    images.forEach(image => {\n        const item = document.createElement('div');\n        item.classList.add('gallery-item');\n        item.innerHTML = `\n        <div class=\"photo-card\">\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                <img width=\"360\" height=\"152\" src=\"${image.webformatURL}\" class=\"photo-card-img\" alt=\"${image.tags}\" loading=\"lazy\"/>\n            </a>\n            <div class=\"info\">\n                <p><b>Likes</b> ${image.likes}</p>\n                <p><b>Views</b> ${image.views}</p>\n                <p><b>Comments</b> ${image.comments}</p>\n                <p><b>Downloads</b> ${image.downloads}</p>\n            </div>\n        </div>\n        `;\n        gallery.appendChild(item);\n    });\n    \n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n\n// Функция для очистки галереи\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\n\nexport function showNoResultsMessage() {\n    iziToast.warning({\n        message: 'Sorry, there are no images matching <br>your search query. Please try again!',\n        position: 'topRight',\n        titleColor: 'white',\n        title: 'ⓧ',\n        titleSize: '22px',\n        backgroundColor: \"red\",\n        icon: \"\",\n        messageColor: 'white',\n        theme: 'dark',\n        class: 'toast-center',\n    });\n    \n}\n\nexport function showErrorMessage(message) {\n    iziToast.error({\n        title: 'Err',\n        message: message,\n        position: 'topRight',\n        titleColor: 'white',\n        title: 'ⓧ',\n        titleSize: '22px',\n        backgroundColor: \"red\",\n        icon: \"\",\n        messageColor: 'white',\n        theme: 'dark',\n    });\n}\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, showNoResultsMessage, showErrorMessage, clearGallery } from './js/render-functions.js';\n\nconst form = document.querySelector('#search-form');\nconst inputField = form.querySelector('input');\nconst loader = document.querySelector('.loader'); \n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const searchQuery = inputField.value.trim();  // Get the trimmed value from the input field\n    // const searchQuery = form.querySelector('input').value.trim();\n    \n    if (!searchQuery || searchQuery === '') {\n        clearGallery(); // Clear the gallery if the search query is invalid\n        showErrorMessage('The search field cannot be empty!');\n        return;\n    }\n\n    loader.style.display = 'block'; \n    try {\n        const data = await fetchImages(searchQuery);\n        loader.style.display = 'none';\n        \n         // Очистить галерею перед добавлением новых изображений\n        clearGallery();\n\n        // Очистка поля ввода, независимо от того, успешен ли поиск\n        inputField.value = ''; \n\n        if (data.hits.length === 0) {\n            showNoResultsMessage();\n        } else {\n            renderGallery(data.hits);\n        }\n    } catch (error) {\n        loader.style.display = 'none';\n        clearGallery(); // Очистить галерею в случае ошибки\n        showErrorMessage('The request failed. Please try again later.');\n        inputField.value = '';  // Clear the input field in case of an error\n    }\n});\n\n\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","response","error","renderGallery","images","gallery","image","item","SimpleLightbox","clearGallery","showNoResultsMessage","iziToast","showErrorMessage","message","form","inputField","loader","event","searchQuery","data"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAO,CACrC,GAAI,CACA,MAAMC,EAAW,MAAM,MACnB,GAAGH,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,EAAM,MAAM,CAAC,0DAC5E,EACQ,GAAI,CAACC,EAAS,GACV,MAAM,IAAI,MAAM,kBAAkB,EAEtC,OAAOA,EAAS,MACnB,OAAQC,EAAO,CACZ,cAAQ,MAAMA,CAAK,EACb,IAAI,MAAM,wBAAwB,CAC3C,CACL,CCXO,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAGjDD,EAAO,QAAQE,GAAS,CACpB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,cAAc,EACjCA,EAAK,UAAY;AAAA;AAAA,uBAEFD,EAAM,aAAa;AAAA,qDACWA,EAAM,YAAY,iCAAiCA,EAAM,IAAI;AAAA;AAAA;AAAA,kCAGhFA,EAAM,KAAK;AAAA,kCACXA,EAAM,KAAK;AAAA,qCACRA,EAAM,QAAQ;AAAA,sCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,UAI7CD,EAAQ,YAAYE,CAAI,CAChC,CAAK,EAEgB,IAAIC,EAAe,YAAY,EACvC,QAAO,CACpB,CAGO,SAASC,GAAe,CAC3B,MAAMJ,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACxB,CAGO,SAASK,GAAuB,CACnCC,EAAS,QAAQ,CACb,QAAS,+EACT,SAAU,WACV,WAAY,QACZ,MAAO,IACP,UAAW,OACX,gBAAiB,MACjB,KAAM,GACN,aAAc,QACd,MAAO,OACP,MAAO,cACf,CAAK,CAEL,CAEO,SAASC,EAAiBC,EAAS,CACtCF,EAAS,MAAM,CACX,MAAO,MACP,QAASE,EACT,SAAU,WACV,WAAY,QACZ,MAAO,IACP,UAAW,OACX,gBAAiB,MACjB,KAAM,GACN,aAAc,QACd,MAAO,MACf,CAAK,CACL,CCjEA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAaD,EAAK,cAAc,OAAO,EACvCE,EAAS,SAAS,cAAc,SAAS,EAE/CF,EAAK,iBAAiB,SAAU,MAAOG,GAAU,CAC7CA,EAAM,eAAc,EAEpB,MAAMC,EAAcH,EAAW,MAAM,KAAI,EAGzC,GAAI,CAACG,GAAeA,IAAgB,GAAI,CACpCT,IACAG,EAAiB,mCAAmC,EACpD,MACH,CAEDI,EAAO,MAAM,QAAU,QACvB,GAAI,CACA,MAAMG,EAAO,MAAMpB,EAAYmB,CAAW,EAC1CF,EAAO,MAAM,QAAU,OAGvBP,IAGAM,EAAW,MAAQ,GAEfI,EAAK,KAAK,SAAW,EACrBT,IAEAP,EAAcgB,EAAK,IAAI,CAE9B,MAAe,CACZH,EAAO,MAAM,QAAU,OACvBP,IACAG,EAAiB,6CAA6C,EAC9DG,EAAW,MAAQ,EACtB,CACL,CAAC"}