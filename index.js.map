{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46054358-74185f2755c78a9980c41a2df';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page,\n                per_page: perPage,\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error(error);\n        throw new Error('Error fetching images.');\n    }\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\n\nexport function renderGallery(images) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.map(image => `\n        <div class=\"gallery-item\">\n            <div class=\"photo-card\">\n                <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                    <img width=\"360\" height=\"152\" src=\"${image.webformatURL}\" class=\"photo-card-img\" alt=\"${image.tags}\" loading=\"lazy\"/>\n                </a>\n                <div class=\"info\">\n                    <p><b>Likes</b> ${image.likes}</p>\n                    <p><b>Views</b> ${image.views}</p>\n                    <p><b>Comments</b> ${image.comments}</p>\n                    <p><b>Downloads</b> ${image.downloads}</p>\n                </div>\n            </div>\n        </div>\n    `).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    \n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a');\n    } else {\n        lightbox.refresh();\n    }\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\nexport function showNoResultsMessage() {\n    iziToast.warning({\n        message: 'Sorry, there are no images matching <br>your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: 'red',\n        class: 'toast-center',\n        titleColor: 'white',\n        title: 'ⓧ',\n        titleSize: '22px',\n        icon: \"\",\n        messageColor: 'white',\n        theme: 'dark',\n    });\n}\n\nexport function showErrorMessage(message) {\n    iziToast.error({\n        message,\n        position: 'topRight',\n        backgroundColor: 'red',\n        class: 'toast-center',\n        titleColor: 'white',\n        title: 'ⓧ',\n        titleSize: '22px',\n        icon: \"\",\n        messageColor: 'white',\n        theme: 'dark',\n    });\n}\n\nexport function showEndOfResultsMessage() {\n    iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: 'blue',\n        class: 'toast-center',\n        messageColor: 'white',\n    });\n}\n\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, showNoResultsMessage, showErrorMessage, showEndOfResultsMessage, clearGallery } from './js/render-functions.js';\n\nconst form = document.querySelector('#search-form');\nconst inputField = form.querySelector('input');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet page = 1;\nlet currentQuery = '';\nlet totalImages = 0;\nlet totalLoadedImages = 0; \n\nloadMoreButton.style.display = 'none';\nloader.style.display = 'none';\n\nfunction resetSearchState() {\n    page = 1; \n    totalLoadedImages = 0; \n    totalImages = 0; \n    clearGallery(); \n    loadMoreButton.style.display = 'none'; \n    loadMoreButton.disabled = false; \n}\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const searchQuery = inputField.value.trim();\n\n    if (!searchQuery || searchQuery === '') {\n        clearGallery();\n        inputField.value = '';\n        loadMoreButton.style.display = 'none'; \n        showErrorMessage('The search field cannot be empty!');\n        return;\n    }\n\n    resetSearchState(); \n    currentQuery = searchQuery; \n\n    loader.style.display = 'block'; \n\n    try {\n        const data = await fetchImages(currentQuery, page);\n        loader.style.display = 'none'; \n\n        if (data.hits.length === 0) {\n            showNoResultsMessage();\n        } else {\n            renderGallery(data.hits);\n            totalImages = data.totalHits; \n            totalLoadedImages += data.hits.length; \n\n            if (totalLoadedImages < totalImages) {\n                loadMoreButton.style.display = 'block';\n            } else {\n                showEndOfResultsMessage(); \n            }\n        }\n    } catch (error) {\n        loader.style.display = 'none';\n        clearGallery();\n        showErrorMessage('The request failed. Please try again later.');\n    }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    page += 1; \n\n    loader.style.display = 'block'; \n    loadMoreButton.disabled = true; \n\n    try {\n        const data = await fetchImages(currentQuery, page);\n\n        if (data.hits.length > 0) {\n            renderGallery(data.hits);\n            totalLoadedImages += data.hits.length; \n\n            smoothScroll();\n\n            if (totalLoadedImages >= totalImages) {\n                loadMoreButton.style.display = 'none';\n                showEndOfResultsMessage();\n            } else {\n                loadMoreButton.disabled = false; \n            }\n        }\n    } catch (error) {\n        loader.style.display = 'none';\n        showErrorMessage('Failed to load more images. Please try again later.');\n        loadMoreButton.disabled = false; \n    } finally {\n        loader.style.display = 'none'; \n    }\n});\n\nfunction smoothScroll() {\n    const gallery = document.querySelector('.gallery');\n    const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n\n\n\n\n\n\n\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","lightbox","renderGallery","images","gallery","markup","image","SimpleLightbox","clearGallery","showNoResultsMessage","iziToast","showErrorMessage","message","showEndOfResultsMessage","form","inputField","loader","loadMoreButton","currentQuery","totalImages","totalLoadedImages","resetSearchState","event","searchQuery","data","smoothScroll","cardHeight"],"mappings":"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"}